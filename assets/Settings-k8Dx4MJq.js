import{r as f,j as o,c as De,Q as re,H as Ks,a2 as yr,A as Xs,a7 as Ws,ai as pe}from"./vendor-B95B9ZTO.js";import{U as jn,V as _t,C as we,W as Gs,u as wr,X as Ys,Y as tn,Z as Cr,B as Fe,_ as Sr,$ as jr,a0 as qs,a1 as Nr,a2 as Zn,a3 as Vs,a4 as Dr,a5 as In,a6 as kt,a7 as vn,a8 as er,a9 as Rt,aa as Js,ab as Qs,o as Ar,ac as Zs,ad as Er,ae as On,af as Tr,ag as Nn,L as ei,ah as ti,ai as Rr,aj as ni,k as ri,ak as tr,al as si,am as Ir,b as ii,an as oi,ao as ai,ap as nr,aq as rr,ar as sr,p as gt,as as ci,at as li,au as di,av as ui,aw as fi,ax as gi,ay as hi}from"./index-DIVXyTVb.js";import{c as Jt,g as pi}from"./auth-72H9TcpW.js";import{c as Mn,a as bi,r as ht}from"./react-dom-BKLNrvNX.js";import{I as Ye,a as le,s as mi,F as vi,g as xi}from"./Icons-yUTtIW30.js";import"./hls-C_AVPmGC.js";import"./language-db-BnRLPJUA.js";import"./caption-parsing-DkYi0hfG.js";import"./locales-DcUbfxfW.js";var nn={exports:{}};nn.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,a=2,l=9007199254740991,d="[object Arguments]",u="[object Array]",g="[object AsyncFunction]",b="[object Boolean]",h="[object Date]",x="[object Error]",m="[object Function]",E="[object GeneratorFunction]",C="[object Map]",j="[object Number]",D="[object Null]",N="[object Object]",S="[object Promise]",T="[object Proxy]",I="[object RegExp]",O="[object Set]",A="[object String]",M="[object Symbol]",B="[object Undefined]",v="[object WeakMap]",P="[object ArrayBuffer]",K="[object DataView]",Z="[object Float32Array]",y="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",G="[object Int32Array]",ke="[object Uint8Array]",X="[object Uint8ClampedArray]",$e="[object Uint16Array]",qe="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,Ae=/^(?:0|[1-9]\d*)$/,_={};_[Z]=_[y]=_[F]=_[U]=_[G]=_[ke]=_[X]=_[$e]=_[qe]=!0,_[d]=_[u]=_[P]=_[b]=_[K]=_[h]=_[x]=_[m]=_[C]=_[j]=_[N]=_[I]=_[O]=_[A]=_[v]=!1;var ee=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,He=typeof self=="object"&&self&&self.Object===Object&&self,W=ee||He||Function("return this")(),ue=t&&!t.nodeType&&t,k=ue&&!0&&e&&!e.nodeType&&e,Ee=k&&k.exports===ue,se=Ee&&ee.process,Te=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),fe=Te&&Te.isTypedArray;function Re(s,c){for(var p=-1,w=s==null?0:s.length,z=0,R=[];++p<w;){var H=s[p];c(H,p,s)&&(R[z++]=H)}return R}function Pe(s,c){for(var p=-1,w=c.length,z=s.length;++p<w;)s[z+p]=c[p];return s}function xt(s,c){for(var p=-1,w=s==null?0:s.length;++p<w;)if(c(s[p],p,s))return!0;return!1}function at(s,c){for(var p=-1,w=Array(s);++p<s;)w[p]=c(p);return w}function yt(s){return function(c){return s(c)}}function Be(s,c){return s.has(c)}function ct(s,c){return s==null?void 0:s[c]}function lt(s){var c=-1,p=Array(s.size);return s.forEach(function(w,z){p[++c]=[z,w]}),p}function zt(s,c){return function(p){return s(c(p))}}function Ft(s){var c=-1,p=Array(s.size);return s.forEach(function(w){p[++c]=w}),p}var gn=Array.prototype,hn=Function.prototype,Ie=Object.prototype,Ue=W["__core-js_shared__"],Ve=hn.toString,me=Ie.hasOwnProperty,Oe=function(){var s=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),wt=Ie.toString,pn=RegExp("^"+Ve.call(me).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$t=Ee?W.Buffer:void 0,tt=W.Symbol,Ht=W.Uint8Array,Ct=Ie.propertyIsEnumerable,bn=gn.splice,Ke=tt?tt.toStringTag:void 0,Kt=Object.getOwnPropertySymbols,Y=$t?$t.isBuffer:void 0,ae=zt(Object.keys,Object),te=ft(W,"DataView"),ge=ft(W,"Map"),ie=ft(W,"Promise"),ce=ft(W,"Set"),he=ft(W,"WeakMap"),Ce=ft(Object,"create"),ve=it(te),nt=it(ge),rt=it(ie),dt=it(ce),ut=it(he),St=tt?tt.prototype:void 0,Xe=St?St.valueOf:void 0;function xe(s){var c=-1,p=s==null?0:s.length;for(this.clear();++c<p;){var w=s[c];this.set(w[0],w[1])}}function jt(){this.__data__=Ce?Ce(null):{},this.size=0}function ns(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function rs(s){var c=this.__data__;if(Ce){var p=c[s];return p===r?void 0:p}return me.call(c,s)?c[s]:void 0}function ss(s){var c=this.__data__;return Ce?c[s]!==void 0:me.call(c,s)}function is(s,c){var p=this.__data__;return this.size+=this.has(s)?0:1,p[s]=Ce&&c===void 0?r:c,this}xe.prototype.clear=jt,xe.prototype.delete=ns,xe.prototype.get=rs,xe.prototype.has=ss,xe.prototype.set=is;function We(s){var c=-1,p=s==null?0:s.length;for(this.clear();++c<p;){var w=s[c];this.set(w[0],w[1])}}function os(){this.__data__=[],this.size=0}function as(s){var c=this.__data__,p=Wt(c,s);if(p<0)return!1;var w=c.length-1;return p==w?c.pop():bn.call(c,p,1),--this.size,!0}function cs(s){var c=this.__data__,p=Wt(c,s);return p<0?void 0:c[p][1]}function ls(s){return Wt(this.__data__,s)>-1}function ds(s,c){var p=this.__data__,w=Wt(p,s);return w<0?(++this.size,p.push([s,c])):p[w][1]=c,this}We.prototype.clear=os,We.prototype.delete=as,We.prototype.get=cs,We.prototype.has=ls,We.prototype.set=ds;function st(s){var c=-1,p=s==null?0:s.length;for(this.clear();++c<p;){var w=s[c];this.set(w[0],w[1])}}function us(){this.size=0,this.__data__={hash:new xe,map:new(ge||We),string:new xe}}function fs(s){var c=Gt(this,s).delete(s);return this.size-=c?1:0,c}function gs(s){return Gt(this,s).get(s)}function hs(s){return Gt(this,s).has(s)}function ps(s,c){var p=Gt(this,s),w=p.size;return p.set(s,c),this.size+=p.size==w?0:1,this}st.prototype.clear=us,st.prototype.delete=fs,st.prototype.get=gs,st.prototype.has=hs,st.prototype.set=ps;function Xt(s){var c=-1,p=s==null?0:s.length;for(this.__data__=new st;++c<p;)this.add(s[c])}function bs(s){return this.__data__.set(s,r),this}function ms(s){return this.__data__.has(s)}Xt.prototype.add=Xt.prototype.push=bs,Xt.prototype.has=ms;function Je(s){var c=this.__data__=new We(s);this.size=c.size}function vs(){this.__data__=new We,this.size=0}function xs(s){var c=this.__data__,p=c.delete(s);return this.size=c.size,p}function ys(s){return this.__data__.get(s)}function ws(s){return this.__data__.has(s)}function Cs(s,c){var p=this.__data__;if(p instanceof We){var w=p.__data__;if(!ge||w.length<n-1)return w.push([s,c]),this.size=++p.size,this;p=this.__data__=new st(w)}return p.set(s,c),this.size=p.size,this}Je.prototype.clear=vs,Je.prototype.delete=xs,Je.prototype.get=ys,Je.prototype.has=ws,Je.prototype.set=Cs;function Ss(s,c){var p=Yt(s),w=!p&&Bs(s),z=!p&&!w&&mn(s),R=!p&&!w&&!z&&Jn(s),H=p||w||z||R,J=H?at(s.length,String):[],ne=J.length;for(var $ in s)me.call(s,$)&&!(H&&($=="length"||z&&($=="offset"||$=="parent")||R&&($=="buffer"||$=="byteLength"||$=="byteOffset")||Ms($,ne)))&&J.push($);return J}function Wt(s,c){for(var p=s.length;p--;)if(Gn(s[p][0],c))return p;return-1}function js(s,c,p){var w=c(s);return Yt(s)?w:Pe(w,p(s))}function Nt(s){return s==null?s===void 0?B:D:Ke&&Ke in Object(s)?Is(s):Ps(s)}function Hn(s){return Dt(s)&&Nt(s)==d}function Kn(s,c,p,w,z){return s===c?!0:s==null||c==null||!Dt(s)&&!Dt(c)?s!==s&&c!==c:Ns(s,c,p,w,Kn,z)}function Ns(s,c,p,w,z,R){var H=Yt(s),J=Yt(c),ne=H?u:Qe(s),$=J?u:Qe(c);ne=ne==d?N:ne,$=$==d?N:$;var ye=ne==N,Me=$==N,oe=ne==$;if(oe&&mn(s)){if(!mn(c))return!1;H=!0,ye=!1}if(oe&&!ye)return R||(R=new Je),H||Jn(s)?Xn(s,c,p,w,z,R):Ts(s,c,ne,p,w,z,R);if(!(p&i)){var Se=ye&&me.call(s,"__wrapped__"),je=Me&&me.call(c,"__wrapped__");if(Se||je){var Ze=Se?s.value():s,Ge=je?c.value():c;return R||(R=new Je),z(Ze,Ge,p,w,R)}}return oe?(R||(R=new Je),Rs(s,c,p,w,z,R)):!1}function Ds(s){if(!Vn(s)||_s(s))return!1;var c=Yn(s)?pn:de;return c.test(it(s))}function As(s){return Dt(s)&&qn(s.length)&&!!_[Nt(s)]}function Es(s){if(!ks(s))return ae(s);var c=[];for(var p in Object(s))me.call(s,p)&&p!="constructor"&&c.push(p);return c}function Xn(s,c,p,w,z,R){var H=p&i,J=s.length,ne=c.length;if(J!=ne&&!(H&&ne>J))return!1;var $=R.get(s);if($&&R.get(c))return $==c;var ye=-1,Me=!0,oe=p&a?new Xt:void 0;for(R.set(s,c),R.set(c,s);++ye<J;){var Se=s[ye],je=c[ye];if(w)var Ze=H?w(je,Se,ye,c,s,R):w(Se,je,ye,s,c,R);if(Ze!==void 0){if(Ze)continue;Me=!1;break}if(oe){if(!xt(c,function(Ge,ot){if(!Be(oe,ot)&&(Se===Ge||z(Se,Ge,p,w,R)))return oe.push(ot)})){Me=!1;break}}else if(!(Se===je||z(Se,je,p,w,R))){Me=!1;break}}return R.delete(s),R.delete(c),Me}function Ts(s,c,p,w,z,R,H){switch(p){case K:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case P:return!(s.byteLength!=c.byteLength||!R(new Ht(s),new Ht(c)));case b:case h:case j:return Gn(+s,+c);case x:return s.name==c.name&&s.message==c.message;case I:case A:return s==c+"";case C:var J=lt;case O:var ne=w&i;if(J||(J=Ft),s.size!=c.size&&!ne)return!1;var $=H.get(s);if($)return $==c;w|=a,H.set(s,c);var ye=Xn(J(s),J(c),w,z,R,H);return H.delete(s),ye;case M:if(Xe)return Xe.call(s)==Xe.call(c)}return!1}function Rs(s,c,p,w,z,R){var H=p&i,J=Wn(s),ne=J.length,$=Wn(c),ye=$.length;if(ne!=ye&&!H)return!1;for(var Me=ne;Me--;){var oe=J[Me];if(!(H?oe in c:me.call(c,oe)))return!1}var Se=R.get(s);if(Se&&R.get(c))return Se==c;var je=!0;R.set(s,c),R.set(c,s);for(var Ze=H;++Me<ne;){oe=J[Me];var Ge=s[oe],ot=c[oe];if(w)var Qn=H?w(ot,Ge,oe,c,s,R):w(Ge,ot,oe,s,c,R);if(!(Qn===void 0?Ge===ot||z(Ge,ot,p,w,R):Qn)){je=!1;break}Ze||(Ze=oe=="constructor")}if(je&&!Ze){var qt=s.constructor,Vt=c.constructor;qt!=Vt&&"constructor"in s&&"constructor"in c&&!(typeof qt=="function"&&qt instanceof qt&&typeof Vt=="function"&&Vt instanceof Vt)&&(je=!1)}return R.delete(s),R.delete(c),je}function Wn(s){return js(s,Fs,Os)}function Gt(s,c){var p=s.__data__;return Ls(c)?p[typeof c=="string"?"string":"hash"]:p.map}function ft(s,c){var p=ct(s,c);return Ds(p)?p:void 0}function Is(s){var c=me.call(s,Ke),p=s[Ke];try{s[Ke]=void 0;var w=!0}catch{}var z=wt.call(s);return w&&(c?s[Ke]=p:delete s[Ke]),z}var Os=Kt?function(s){return s==null?[]:(s=Object(s),Re(Kt(s),function(c){return Ct.call(s,c)}))}:$s,Qe=Nt;(te&&Qe(new te(new ArrayBuffer(1)))!=K||ge&&Qe(new ge)!=C||ie&&Qe(ie.resolve())!=S||ce&&Qe(new ce)!=O||he&&Qe(new he)!=v)&&(Qe=function(s){var c=Nt(s),p=c==N?s.constructor:void 0,w=p?it(p):"";if(w)switch(w){case ve:return K;case nt:return C;case rt:return S;case dt:return O;case ut:return v}return c});function Ms(s,c){return c=c??l,!!c&&(typeof s=="number"||Ae.test(s))&&s>-1&&s%1==0&&s<c}function Ls(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function _s(s){return!!Oe&&Oe in s}function ks(s){var c=s&&s.constructor,p=typeof c=="function"&&c.prototype||Ie;return s===p}function Ps(s){return wt.call(s)}function it(s){if(s!=null){try{return Ve.call(s)}catch{}try{return s+""}catch{}}return""}function Gn(s,c){return s===c||s!==s&&c!==c}var Bs=Hn(function(){return arguments}())?Hn:function(s){return Dt(s)&&me.call(s,"callee")&&!Ct.call(s,"callee")},Yt=Array.isArray;function Us(s){return s!=null&&qn(s.length)&&!Yn(s)}var mn=Y||Hs;function zs(s,c){return Kn(s,c)}function Yn(s){if(!Vn(s))return!1;var c=Nt(s);return c==m||c==E||c==g||c==T}function qn(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=l}function Vn(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function Dt(s){return s!=null&&typeof s=="object"}var Jn=fe?yt(fe):As;function Fs(s){return Us(s)?Ss(s):Es(s)}function $s(){return[]}function Hs(){return!1}e.exports=zs})(nn,nn.exports);var yi=nn.exports;const wi=pi(yi);function ze(e){const[t,n]=f.useState(void 0);f.useEffect(()=>{n(void 0)},[e]);const r=f.useMemo(()=>!wi(t,e)&&t!==void 0,[t,e]),i=f.useCallback(d=>{d instanceof Function?n(u=>d(u!==void 0?u:e)):n(d)},[e,n]),a=t===void 0?e:t,l=f.useCallback(()=>n(void 0),[n]);return[a,i,l,r]}function Ci(e,t,n,r,i,a,l,d,u,g){const[b,h,x,m]=ze(i),[E,C,j,D]=ze(a),[N,S,T,I]=ze(e),O=jn(at=>at.setPreviewTheme),A=f.useCallback(()=>O(e),[O,e]),[M,B,v,P]=ze(t),[K,Z,y,F]=ze(n),[U,G,ke,X]=ze(r),[$e,qe,V,de]=ze(l),[Ae,_,ee,He]=ze(d),[W,ue,k,Ee]=ze(u),[se,Te,fe,Re]=ze(g);function Pe(){T(),A(),v(),y(),x(),j(),ke(),V(),ee(),k(),fe()}return{reset:Pe,changed:I||P||F||X||D||m||de||He||Ee||Re,theme:{state:N,set:S,changed:I},appLanguage:{state:M,set:B,changed:P},subtitleStyling:{state:K,set:Z,changed:F},deviceName:{state:U,set:G,changed:X},proxyUrls:{state:b,set:h,changed:m},backendUrl:{state:E,set:C,changed:D},profile:{state:$e,set:qe,changed:de},enableThumbnails:{state:Ae,set:_,changed:He},enableAutoplay:{state:W,set:ue,changed:Ee},sourceOrder:{state:se,set:Te,changed:Re}}}function cn(e){return o.jsx("div",{className:De("w-full rounded-lg bg-settings-card-background bg-opacity-[0.15] border border-settings-card-border",e.paddingClass??"px-8 py-6",e.className),children:e.children})}function Or(e){return o.jsx("div",{className:De("w-full rounded-lg bg-settings-card-altBackground bg-opacity-50",e.paddingClass??"px-8 py-6",e.className),children:e.children})}function Si(){const{t:e}=re(),t=_t(),n=we(d=>d.account),{logout:r}=Gs(),i=wr("account-delete"),[a,l]=Mn(async()=>{!n||!t||(await Ys(t,n),await r(),i.hide())},[r,n,t,i.hide]);return n?o.jsxs("div",{children:[o.jsx(tn,{border:!0,children:e("settings.account.actions.title")}),o.jsxs(Or,{paddingClass:"px-6 py-12",className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[o.jsxs("div",{children:[o.jsx(Cr,{children:e("settings.account.actions.delete.title")}),o.jsx("p",{className:"text-type-text",children:e("settings.account.actions.delete.text")})]}),o.jsx("div",{className:"flex justify-start lg:justify-end items-center",children:o.jsx(Fe,{theme:"danger",loading:a.loading,onClick:i.show,children:e("settings.account.actions.delete.button")})})]}),o.jsx(Sr,{id:i.id,children:o.jsxs(jr,{children:[o.jsx(tn,{className:"!mt-0",children:e("settings.account.actions.delete.confirmTitle")}),o.jsx(qs,{children:e("settings.account.actions.delete.confirmDescription")}),o.jsx(Fe,{theme:"danger",loading:a.loading,onClick:l,children:e("settings.account.actions.delete.confirmButton")})]})})]}):null}function ji(e){const{t}=re();return o.jsx(Sr,{id:e.id,children:o.jsxs(jr,{children:[o.jsxs("div",{className:"flex justify-between items-center mb-9",children:[o.jsx(tn,{className:"!mt-0 !mb-0",children:t("settings.account.profile.title")}),o.jsx(Nr,{profile:{colorA:e.colorA,colorB:e.colorB,icon:e.userIcon},iconClass:"text-2xl",sizeClass:"w-12 h-12"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Zn,{label:t("settings.account.profile.firstColor"),value:e.colorA,onInput:e.setColorA}),o.jsx(Zn,{label:t("settings.account.profile.secondColor"),value:e.colorB,onInput:e.setColorB}),o.jsx(Vs,{label:t("settings.account.profile.userIcon"),value:e.userIcon,onInput:e.setUserIcon})]}),o.jsx("div",{className:"flex justify-center mt-8",children:o.jsx(Fe,{theme:"purple",className:"!px-20",onClick:e.close,children:t("settings.account.profile.finish")})})]})})}function Ni(e){const{t}=re(),{logout:n}=Dr(),r=wr("profile-edit");return o.jsxs(cn,{paddingClass:"px-8 py-10",className:"!mt-8",children:[o.jsx(ji,{id:r.id,close:r.hide,colorA:e.colorA,setColorA:e.setColorA,colorB:e.colorB,setColorB:e.setColorB,userIcon:e.userIcon,setUserIcon:e.setUserIcon}),o.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-8",children:[o.jsx("div",{children:o.jsx(Nr,{profile:{colorA:e.colorA,colorB:e.colorB,icon:e.userIcon},iconClass:"text-5xl",sizeClass:"w-32 h-32",bottom:o.jsxs("button",{type:"button",className:"tabbable text-xs flex gap-2 items-center bg-editBadge-bg text-editBadge-text hover:bg-editBadge-bgHover py-1 px-3 rounded-full cursor-pointer",onClick:r.show,children:[o.jsx(Ye,{icon:le.EDIT}),t("settings.account.accountDetails.editProfile")]})})}),o.jsx("div",{children:o.jsxs("div",{className:"space-y-8 max-w-xs",children:[o.jsx(In,{label:t("settings.account.accountDetails.deviceNameLabel")??void 0,placeholder:t("settings.account.accountDetails.deviceNamePlaceholder")??void 0,value:e.deviceName,onChange:i=>e.setDeviceName(i)}),o.jsx("div",{className:"flex space-x-3",children:o.jsx(Fe,{theme:"danger",onClick:n,children:t("settings.account.accountDetails.logoutButton")})})]})})]})]})}function ir(e){const{t}=re();return o.jsxs("div",{className:De({"pointer-events-none overflow-hidden w-full rounded":!0,"aspect-video relative":!e.fullscreen,"fixed inset-0 z-[60]":e.fullscreen}),children:[e.fullscreen&&e.show?o.jsx(Ks,{children:o.jsx("html",{"data-no-scroll":!0})}):null,o.jsx(Ar,{animation:"fade",show:e.show,children:o.jsxs("div",{className:"absolute inset-0 pointer-events-auto",style:{backgroundImage:"radial-gradient(102.95% 87.07% at 100% 100%, #EEAA45 0%, rgba(165, 186, 151, 0.56) 54.69%, rgba(74, 207, 254, 0.00) 100%), linear-gradient(180deg, #48D3FF 0%, #3B27B2 100%)"},children:[o.jsx("button",{type:"button",className:"tabbable bg-black absolute right-3 top-3 text-white bg-opacity-25 duration-100 transition-[background-color,transform] active:scale-110 hover:bg-opacity-50 p-2 rounded-md cursor-pointer",onClick:e.onToggle,children:o.jsx(Ye,{icon:e.fullscreen?le.X:le.EXPAND})}),o.jsx("div",{className:"text-white pointer-events-none absolute flex w-full flex-col items-center transition-[bottom] bottom-0 p-4",children:o.jsx("div",{className:e.fullscreen?"":"transform origin-bottom text-[0.5rem]",children:o.jsx(Zs,{text:t("settings.subtitles.previewQuote")??void 0,styling:e.styling,overrideCasing:!1})})})]})})]})}function Di(e){const{t}=re(),[n,r]=f.useState(!1);return o.jsxs("div",{children:[o.jsx(kt,{border:!0,children:t("settings.subtitles.title")}),o.jsxs("div",{className:"grid md:grid-cols-[1fr,356px] gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx(vn,{label:t("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:i=>e.setStyling({...e.styling,backgroundOpacity:i/100}),value:e.styling.backgroundOpacity*100,textTransformer:i=>`${i}%`}),o.jsx(vn,{label:t("settings.subtitles.backgroundBlurLabel"),max:100,min:0,onChange:i=>e.setStyling({...e.styling,backgroundBlur:i/100}),value:e.styling.backgroundBlur*1,textTransformer:i=>`${i}%`}),o.jsx(vn,{label:t("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:i=>`${i}%`,onChange:i=>e.setStyling({...e.styling,size:i/100}),value:e.styling.size*100}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(er.FieldTitle,{children:t("settings.subtitles.textBoldLabel")}),o.jsx("div",{className:"flex justify-center items-center",children:o.jsx(Rt,{enabled:e.styling.bold,onClick:()=>e.setStyling({...e.styling,bold:!e.styling.bold})})})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(er.FieldTitle,{children:t("settings.subtitles.colorLabel")}),o.jsx("div",{className:"flex justify-center items-center",children:Js.map(i=>o.jsx(Qs,{onClick:()=>e.setStyling({...e.styling,color:i}),color:i,active:e.styling.color===i},i))})]})]}),o.jsx(ir,{show:!0,styling:e.styling,onToggle:()=>r(i=>!i)}),o.jsx(ir,{show:n,fullscreen:!0,styling:e.styling,onToggle:()=>r(i=>!i)})]})]})}function Ai(e){let{proxyUrls:t,setProxyUrls:n}=e;const{t:r}=re(),i=f.useCallback(()=>{n(d=>[...d??[],""])},[n]),a=f.useCallback((d,u)=>{n(g=>[...(g??[]).map((b,h)=>h!==d?b:u)])},[n]),l=f.useCallback(d=>{n(u=>[...(u??[]).filter((g,b)=>b!==d)])},[n]);return o.jsxs(cn,{children:[o.jsxs("div",{className:"flex justify-between items-center gap-4",children:[o.jsxs("div",{className:"my-3",children:[o.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.workers.label")}),o.jsx("p",{className:"max-w-[20rem] font-medium",children:o.jsx(yr,{i18nKey:"settings.connections.workers.description",children:o.jsx(Er,{to:"https://docs.undi.rest/proxy/deploy",children:"Proxy documentation"})})})]}),o.jsx("div",{children:o.jsx(Rt,{onClick:()=>n(d=>d===null?[]:null),enabled:t!==null})})]}),t!==null?o.jsxs(o.Fragment,{children:[o.jsx(On,{marginClass:"my-6 px-8 box-content -mx-8"}),o.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.workers.urlLabel")}),o.jsxs("div",{className:"my-6 space-y-2 max-w-md",children:[((t==null?void 0:t.length)??0)===0?o.jsx("p",{children:r("settings.connections.workers.emptyState")}):null,(t??[]).map((d,u)=>o.jsxs("div",{className:"grid grid-cols-[1fr,auto] items-center gap-2",children:[o.jsx(In,{value:d,onChange:g=>a(u,g),placeholder:r("settings.connections.workers.urlPlaceholder")??void 0}),o.jsx("button",{type:"button",onClick:()=>l(u),className:"h-full scale-90 hover:scale-100 rounded-full aspect-square bg-authentication-inputBg hover:bg-authentication-inputBgHover flex justify-center items-center transition-transform duration-200 hover:text-white cursor-pointer",children:o.jsx(Ye,{className:"text-xl",icon:le.X})})]},u))]}),o.jsx(Fe,{theme:"purple",onClick:i,children:r("settings.connections.workers.addButton")})]}):null]})}function Ei(e){let{backendUrl:t,setBackendUrl:n}=e;const{t:r}=re();return o.jsxs(cn,{children:[o.jsxs("div",{className:"flex justify-between items-center gap-4",children:[o.jsxs("div",{className:"my-3",children:[o.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.server.label")}),o.jsx("p",{className:"max-w-[20rem] font-medium",children:o.jsx(yr,{i18nKey:"settings.connections.server.description",children:o.jsx(Er,{to:"https://docs.undi.rest/backend/deploy",children:"Backend documentation"})})})]}),o.jsx("div",{children:o.jsx(Rt,{onClick:()=>n(i=>i===null?"":null),enabled:t!==null})})]}),t!==null?o.jsxs(o.Fragment,{children:[o.jsx(On,{marginClass:"my-6 px-8 box-content -mx-8"}),o.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.server.urlLabel")}),o.jsx(In,{onChange:n,value:t??""})]}):null]})}function Ti(e){const{t}=re();return o.jsxs("div",{children:[o.jsx(kt,{border:!0,children:t("settings.connections.title")}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ai,{proxyUrls:e.proxyUrls,setProxyUrls:e.setProxyUrls}),o.jsx(Ei,{backendUrl:e.backendUrl,setBackendUrl:e.setBackendUrl})]})]})}function Ri(e){return o.jsx("p",{className:"text-type-text",children:e.children})}function Ii(e){const{t}=re(),n=_t(),r=we(l=>{var d;return(d=l.account)==null?void 0:d.token}),[i,a]=Mn(async()=>{var l;if(!r)throw new Error("No token present");if(!n)throw new Error("No backend set");await ti(n,r,e.id),(l=e.onRemove)==null||l.call(e)},[n,r,e.id]);return o.jsxs(cn,{className:"flex justify-between items-center",paddingClass:"px-6 py-4",children:[o.jsxs("div",{className:"font-medium",children:[o.jsx(Ri,{children:t("settings.account.devices.deviceNameLabel")}),o.jsx("p",{className:"text-white",children:e.name})]}),e.isCurrent?null:o.jsx(Fe,{theme:"danger",loading:i.loading,onClick:a,children:t("settings.account.devices.removeDevice")})]})}function Oi(e){const{t}=re(),n=we(l=>{var d;return(d=l.account)==null?void 0:d.seed}),r=e.sessions,i=we(l=>{var d;return(d=l.account)==null?void 0:d.sessionId}),a=f.useMemo(()=>{if(!n)return[];let l=r.map(d=>{const u=Tr(d.device,Nn(n));return{current:d.id===i,id:d.id,name:u}});return l=l.sort((d,u)=>d.current?-1:u.current?1:d.name.localeCompare(u.name)),l},[n,r,i]);return n?o.jsxs("div",{children:[o.jsx(tn,{border:!0,className:"mt-0 mb-9",children:t("settings.account.devices.title")}),e.error?o.jsx("p",{children:t("settings.account.devices.failed")}):e.loading?o.jsx(ei,{}):o.jsx("div",{className:"space-y-5",children:a.map(l=>o.jsx(Ii,{name:l.name,id:l.id,isCurrent:l.current,onRemove:e.onChange},l.id))})]}):null}function Mi(){const e=Xs(),{t}=re();return o.jsx("div",{children:o.jsxs(Or,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[o.jsxs("div",{children:[o.jsx(Cr,{children:t("settings.account.register.title")}),o.jsx("p",{className:"text-type-text",children:t("settings.account.register.text")})]}),o.jsx("div",{className:"flex justify-end items-center",children:o.jsx(Fe,{theme:"purple",onClick:()=>e("/register"),children:t("settings.account.register.cta")})})]})})}function or(e){return o.jsxs("section",{className:e.className??"",children:[o.jsx("p",{className:"text-sm font-bold uppercase text-settings-sidebar-type-secondary mb-2",children:e.title}),e.children]})}function Li(e){return o.jsxs("button",{type:"button",onClick:e.onClick,className:De("tabbable w-full px-3 py-2 flex items-center space-x-3 cursor-pointer rounded my-2",e.active?"bg-settings-sidebar-activeLink text-settings-sidebar-type-activated":null),children:[o.jsx(Ye,{className:De("text-2xl text-settings-sidebar-type-icon",e.active?"text-settings-sidebar-type-iconActivated":null),icon:e.icon}),o.jsx("span",{children:e.children})]})}const _i=16;function ki(e){const{t}=re(),n=e.url?e.url.startsWith("https://"):!1;return o.jsxs("div",{className:"flex items-center gap-1 -mx-1 ml-3 px-1 rounded bg-largeCard-background font-bold",children:[o.jsx(Ye,{icon:n?le.LOCK:le.UNLOCK}),t(n?"settings.sidebar.info.secure":"settings.sidebar.info.insecure")]})}function Pi(){var b;const{t:e}=re(),{isMobile:t}=Rr(),{account:n}=we(),r=location.hostname,[i,a]=f.useState(""),l=[{textKey:"settings.account.title",id:"settings-account",icon:le.USER},{textKey:"settings.preferences.title",id:"settings-preferences",icon:le.SETTINGS},{textKey:"settings.appearance.title",id:"settings-appearance",icon:le.BRUSH},{textKey:"settings.subtitles.title",id:"settings-captions",icon:le.CAPTIONS},{textKey:"settings.connections.title",id:"settings-connection",icon:le.LINK}],d=_t(),u=bi(async()=>{if(d)return ni(d)},[d]);f.useEffect(()=>{function h(){var C;const m=(window.innerHeight||document.documentElement.clientHeight)/4,E=l.map(j=>{const D=document.getElementById(j.id);if(!D)return{distance:1/0,link:j.id};const N=D.getBoundingClientRect(),S=Math.abs(m-N.top),T=Math.abs(m-N.bottom);return{distance:Math.min(T,S),link:j.id}}).sort((j,D)=>j.distance-D.distance);window.innerHeight+window.scrollY>=document.body.offsetHeight?a(l[l.length-1].id):a(((C=E[0])==null?void 0:C.link)??"")}return document.addEventListener("scroll",h),h(),()=>{document.removeEventListener("scroll",h)}});const g=f.useCallback(h=>{const x=document.getElementById(h);if(!x)return null;const m=x.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:m-120,behavior:"smooth"})},[]);return o.jsx("div",{className:"text-settings-sidebar-type-inactive sidebar-boundary",children:o.jsxs(Ws,{topOffset:-6*_i,stickyClassName:"pt-[6rem]",disabled:t,hideOnBoundaryHit:!1,boundaryElement:".sidebar-boundary",children:[o.jsxs("div",{className:"hidden lg:block",children:[o.jsx(or,{title:e("global.pages.settings"),children:l.map(h=>o.jsx(Li,{icon:h.icon,active:h.id===i,onClick:()=>g(h.id),children:e(h.textKey)},h.id))}),o.jsx(On,{})]}),o.jsx(or,{className:"text-sm",title:e("settings.sidebar.info.title"),children:o.jsxs("div",{className:"px-3 py-3.5 rounded-lg bg-largeCard-background bg-opacity-50 grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"col-span-2 space-y-1",children:[o.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.hostname")}),o.jsx("p",{className:"text-white",children:r})]}),o.jsxs("div",{className:"col-span-2 space-y-1",children:[o.jsxs("div",{className:"text-type-dimmed font-medium flex items-center",children:[o.jsx("p",{children:e("settings.sidebar.info.backendUrl")}),o.jsx(ki,{url:d})]}),o.jsx("p",{className:"text-white",children:(d==null?void 0:d.replace(/https?:\/\//,""))??"—"})]}),o.jsxs("div",{className:"col-span-2 space-y-1",children:[o.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.userId")}),o.jsx("p",{className:"text-white",children:(n==null?void 0:n.userId)??e("settings.sidebar.info.notLoggedIn")})]}),o.jsxs("div",{className:"col-span-1 space-y-1",children:[o.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.appVersion")}),o.jsx("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-block",children:ri().APP_VERSION})]}),o.jsxs("div",{className:"col-span-1 space-y-1",children:[o.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.backendVersion")}),o.jsxs("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-flex items-center gap-1",children:[u.error?o.jsx(Ye,{icon:le.WARNING,className:"text-type-danger text-base"}):null,u.loading?o.jsx("span",{className:"block h-4 w-12 bg-type-dimmed/20 rounded"}):((b=u==null?void 0:u.value)==null?void 0:b.version)||e("settings.sidebar.info.unknownVersion")]})]})]})})]})})}const Bi=[{id:"default",selector:"theme-default",key:"settings.appearance.themes.default"},{id:"teal",selector:"theme-teal",key:"settings.appearance.themes.teal"},{id:"red",selector:"theme-red",key:"settings.appearance.themes.red"},{id:"gray",selector:"theme-gray",key:"settings.appearance.themes.gray"},{id:"blck",selector:"theme-blck",key:"settings.appearance.themes.blck"}],Ui=function(t){const{t:n}=re();return o.jsxs("div",{className:De(t.selector,"cursor-pointer group tabbable"),onClick:t.onClick,children:[o.jsxs("div",{tabIndex:0,onKeyUp:r=>r.key==="Enter"&&r.currentTarget.click(),className:De("tabbable scroll-mt-32 w-full h-32 relative rounded-lg border bg-gradient-to-br from-themePreview-primary/20 to-themePreview-secondary/10 bg-clip-content transition-colors duration-150",t.active?"border-themePreview-primary":"border-transparent group-hover:border-white/20"),children:[o.jsxs("div",{className:"absolute top-2 left-2",children:[o.jsx("div",{className:"h-5 w-5 bg-themePreview-primary rounded-full"}),o.jsx("div",{className:"h-5 w-5 bg-themePreview-secondary rounded-full -mt-2"})]}),o.jsx(Ye,{icon:le.CHECKMARK,className:De("absolute top-3 right-3 text-xs text-white transition-opacity duration-150",t.active?"opacity-100":"opacity-0")}),o.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/5 h-4/5 rounded-t-lg -mb-px bg-background-main overflow-hidden",children:o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("div",{className:"bg-themePreview-primary/50 w-[130%] h-10 absolute left-1/2 -top-5 blur-xl transform -translate-x-1/2 rounded-[100%]"}),o.jsxs("div",{className:"p-2 flex justify-between items-center",children:[o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-4 h-2 rounded-full"}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),o.jsxs("div",{className:"mt-1 flex items-center flex-col gap-1",children:[o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-6 h-0.5 rounded-full"}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-16 h-2 mt-1 rounded-full"})]}),o.jsxs("div",{className:"mt-5 px-3",children:[o.jsxs("div",{className:"flex gap-1 items-center",children:[o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-2 h-2 rounded-full"}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"})]}),o.jsxs("div",{className:"flex w-full gap-1 mt-1",children:[o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),o.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"})]})]})]})})]}),o.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[o.jsx("span",{className:"font-medium text-white",children:t.name}),o.jsx("span",{className:De("inline-block px-3 py-1 leading-tight text-sm transition-opacity duration-150 rounded-full bg-pill-activeBackground text-white/85",t.inUse?"opacity-100":"opacity-0 pointer-events-none"),children:n("settings.appearance.activeTheme")})]})]})},zi=Ui;function Fi(e){const{t}=re();return o.jsxs("div",{children:[o.jsx(kt,{border:!0,children:t("settings.appearance.title")}),o.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-6 max-w-[700px]",children:Bi.map(n=>o.jsx(zi,{selector:n.selector,active:e.active===n.id,inUse:e.inUse===n.id,name:t(n.key),onClick:()=>e.setTheme(n.id)},n.id))})]})}function $i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const ln=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ln(e){return"nodeType"in e}function be(e){var t,n;return e?bt(e)?e:Ln(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function _n(e){const{Document:t}=be(e);return e instanceof t}function Pt(e){return bt(e)?!1:e instanceof be(e).HTMLElement}function Mr(e){return e instanceof be(e).SVGElement}function mt(e){return e?bt(e)?e.document:Ln(e)?_n(e)?e:Pt(e)||Mr(e)?e.ownerDocument:document:document:document}const Le=ln?f.useLayoutEffect:f.useEffect;function kn(e){const t=f.useRef(e);return Le(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function Hi(){const e=f.useRef(null),t=f.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function It(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return Le(()=>{n.current!==e&&(n.current=e)},t),n}function Bt(e,t){const n=f.useRef();return f.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function rn(e){const t=kn(e),n=f.useRef(null),r=f.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function Dn(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let xn={};function Ut(e,t){return f.useMemo(()=>{if(t)return t;const n=xn[e]==null?0:xn[e]+1;return xn[e]=n,e+"-"+n},[e,t])}function Lr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,l)=>{const d=Object.entries(l);for(const[u,g]of d){const b=a[u];b!=null&&(a[u]=b+e*g)}return a},{...t})}}const pt=Lr(1),Ot=Lr(-1);function Ki(e){return"clientX"in e&&"clientY"in e}function Pn(e){if(!e)return!1;const{KeyboardEvent:t}=be(e.target);return t&&e instanceof t}function Xi(e){if(!e)return!1;const{TouchEvent:t}=be(e.target);return t&&e instanceof t}function An(e){if(Xi(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ki(e)?{x:e.clientX,y:e.clientY}:null}const Mt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Mt.Translate.toString(e),Mt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),ar="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Wi(e){return e.matches(ar)?e:e.querySelector(ar)}const Gi={display:"none"};function Yi(e){let{id:t,value:n}=e;return pe.createElement("div",{id:t,style:Gi},n)}function qi(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return pe.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Vi(){const[e,t]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const _r=f.createContext(null);function Ji(e){const t=f.useContext(_r);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Qi(){const[e]=f.useState(()=>new Set),t=f.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[f.useCallback(r=>{let{type:i,event:a}=r;e.forEach(l=>{var d;return(d=l[i])==null?void 0:d.call(l,a)})},[e]),t]}const Zi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},eo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function to(e){let{announcements:t=eo,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Zi}=e;const{announce:a,announcement:l}=Vi(),d=Ut("DndLiveRegion"),[u,g]=f.useState(!1);if(f.useEffect(()=>{g(!0)},[]),Ji(f.useMemo(()=>({onDragStart(h){let{active:x}=h;a(t.onDragStart({active:x}))},onDragMove(h){let{active:x,over:m}=h;t.onDragMove&&a(t.onDragMove({active:x,over:m}))},onDragOver(h){let{active:x,over:m}=h;a(t.onDragOver({active:x,over:m}))},onDragEnd(h){let{active:x,over:m}=h;a(t.onDragEnd({active:x,over:m}))},onDragCancel(h){let{active:x,over:m}=h;a(t.onDragCancel({active:x,over:m}))}}),[a,t])),!u)return null;const b=pe.createElement(pe.Fragment,null,pe.createElement(Yi,{id:r,value:i.draggable}),pe.createElement(qi,{id:d,announcement:l}));return n?ht.createPortal(b,n):b}var q;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(q||(q={}));function sn(){}function cr(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function no(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const _e=Object.freeze({x:0,y:0});function kr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ro(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function lr(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function Br(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function dr(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const so=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=dr(t,t.left,t.top),a=[];for(const l of r){const{id:d}=l,u=n.get(d);if(u){const g=kr(dr(u),i);a.push({id:d,data:{droppableContainer:l,value:g}})}}return a.sort(Pr)},io=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=lr(t),a=[];for(const l of r){const{id:d}=l,u=n.get(d);if(u){const g=lr(u),b=i.reduce((x,m,E)=>x+kr(g[E],m),0),h=Number((b/4).toFixed(4));a.push({id:d,data:{droppableContainer:l,value:h}})}}return a.sort(Pr)};function oo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),l=i-r,d=a-n;if(r<i&&n<a){const u=t.width*t.height,g=e.width*e.height,b=l*d,h=b/(u+g-b);return Number(h.toFixed(4))}return 0}const ao=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const a of r){const{id:l}=a,d=n.get(l);if(d){const u=oo(d,t);u>0&&i.push({id:l,data:{droppableContainer:a,value:u}})}}return i.sort(ro)};function co(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Ur(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:_e}function lo(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i.reduce((l,d)=>({...l,top:l.top+e*d.y,bottom:l.bottom+e*d.y,left:l.left+e*d.x,right:l.right+e*d.x}),{...n})}}const uo=lo(1);function fo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function go(e,t,n){const r=fo(t);if(!r)return e;const{scaleX:i,scaleY:a,x:l,y:d}=r,u=e.left-l-(1-i)*parseFloat(n),g=e.top-d-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),b=i?e.width/i:e.width,h=a?e.height/a:e.height;return{width:b,height:h,top:g,right:u+b,bottom:g+h,left:u}}const ho={ignoreTransform:!1};function vt(e,t){t===void 0&&(t=ho);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:g,transformOrigin:b}=be(e).getComputedStyle(e);g&&(n=go(n,g,b))}const{top:r,left:i,width:a,height:l,bottom:d,right:u}=n;return{top:r,left:i,width:a,height:l,bottom:d,right:u}}function ur(e){return vt(e,{ignoreTransform:!0})}function po(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function bo(e,t){return t===void 0&&(t=be(e).getComputedStyle(e)),t.position==="fixed"}function mo(e,t){t===void 0&&(t=be(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?n.test(a):!1})}function dn(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(_n(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Pt(i)||Mr(i)||n.includes(i))return n;const a=be(e).getComputedStyle(i);return i!==e&&mo(i,a)&&n.push(i),bo(i,a)?n:r(i.parentNode)}return e?r(e):n}function zr(e){const[t]=dn(e,1);return t??null}function yn(e){return!ln||!e?null:bt(e)?e:Ln(e)?_n(e)||e===mt(e).scrollingElement?window:Pt(e)?e:null:null}function Fr(e){return bt(e)?e.scrollX:e.scrollLeft}function $r(e){return bt(e)?e.scrollY:e.scrollTop}function En(e){return{x:Fr(e),y:$r(e)}}var Q;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Q||(Q={}));function Hr(e){return!ln||!e?!1:e===document.scrollingElement}function Kr(e){const t={x:0,y:0},n=Hr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,d=e.scrollLeft>=r.x;return{isTop:i,isLeft:a,isBottom:l,isRight:d,maxScroll:r,minScroll:t}}const vo={x:.2,y:.2};function xo(e,t,n,r,i){let{top:a,left:l,right:d,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=vo);const{isTop:g,isBottom:b,isLeft:h,isRight:x}=Kr(e),m={x:0,y:0},E={x:0,y:0},C={height:t.height*i.y,width:t.width*i.x};return!g&&a<=t.top+C.height?(m.y=Q.Backward,E.y=r*Math.abs((t.top+C.height-a)/C.height)):!b&&u>=t.bottom-C.height&&(m.y=Q.Forward,E.y=r*Math.abs((t.bottom-C.height-u)/C.height)),!x&&d>=t.right-C.width?(m.x=Q.Forward,E.x=r*Math.abs((t.right-C.width-d)/C.width)):!h&&l<=t.left+C.width&&(m.x=Q.Backward,E.x=r*Math.abs((t.left+C.width-l)/C.width)),{direction:m,speed:E}}function yo(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Xr(e){return e.reduce((t,n)=>pt(t,En(n)),_e)}function wo(e){return e.reduce((t,n)=>t+Fr(n),0)}function Co(e){return e.reduce((t,n)=>t+$r(n),0)}function So(e,t){if(t===void 0&&(t=vt),!e)return;const{top:n,left:r,bottom:i,right:a}=t(e);zr(e)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const jo=[["x",["left","right"],wo],["y",["top","bottom"],Co]];class Bn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=dn(n),i=Xr(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,l,d]of jo)for(const u of l)Object.defineProperty(this,u,{get:()=>{const g=d(r),b=i[a]-g;return this.rect[u]+b},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class At{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function No(e){const{EventTarget:t}=be(e);return e instanceof t?e:mt(e)}function wn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ne;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ne||(Ne={}));function fr(e){e.preventDefault()}function Do(e){e.stopPropagation()}var L;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(L||(L={}));const Wr={start:[L.Space,L.Enter],cancel:[L.Esc],end:[L.Space,L.Enter]},Ao=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case L.Right:return{...n,x:n.x+25};case L.Left:return{...n,x:n.x-25};case L.Down:return{...n,y:n.y+25};case L.Up:return{...n,y:n.y-25}}};class Un{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new At(mt(n)),this.windowListeners=new At(be(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ne.Resize,this.handleCancel),this.windowListeners.add(Ne.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ne.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&So(r),n(_e)}handleKeyDown(t){if(Pn(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:a=Wr,coordinateGetter:l=Ao,scrollBehavior:d="smooth"}=i,{code:u}=t;if(a.end.includes(u)){this.handleEnd(t);return}if(a.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:g}=r.current,b=g?{x:g.left,y:g.top}:_e;this.referenceCoordinates||(this.referenceCoordinates=b);const h=l(t,{active:n,context:r.current,currentCoordinates:b});if(h){const x=Ot(h,b),m={x:0,y:0},{scrollableAncestors:E}=r.current;for(const C of E){const j=t.code,{isTop:D,isRight:N,isLeft:S,isBottom:T,maxScroll:I,minScroll:O}=Kr(C),A=yo(C),M={x:Math.min(j===L.Right?A.right-A.width/2:A.right,Math.max(j===L.Right?A.left:A.left+A.width/2,h.x)),y:Math.min(j===L.Down?A.bottom-A.height/2:A.bottom,Math.max(j===L.Down?A.top:A.top+A.height/2,h.y))},B=j===L.Right&&!N||j===L.Left&&!S,v=j===L.Down&&!T||j===L.Up&&!D;if(B&&M.x!==h.x){const P=C.scrollLeft+x.x,K=j===L.Right&&P<=I.x||j===L.Left&&P>=O.x;if(K&&!x.y){C.scrollTo({left:P,behavior:d});return}K?m.x=C.scrollLeft-P:m.x=j===L.Right?C.scrollLeft-I.x:C.scrollLeft-O.x,m.x&&C.scrollBy({left:-m.x,behavior:d});break}else if(v&&M.y!==h.y){const P=C.scrollTop+x.y,K=j===L.Down&&P<=I.y||j===L.Up&&P>=O.y;if(K&&!x.x){C.scrollTo({top:P,behavior:d});return}K?m.y=C.scrollTop-P:m.y=j===L.Down?C.scrollTop-I.y:C.scrollTop-O.y,m.y&&C.scrollBy({top:-m.y,behavior:d});break}}this.handleMove(t,pt(Ot(h,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Un.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Wr,onActivation:i}=t,{active:a}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const d=a.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function gr(e){return!!(e&&"distance"in e)}function hr(e){return!!(e&&"delay"in e)}class zn{constructor(t,n,r){var i;r===void 0&&(r=No(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:l}=a;this.props=t,this.events=n,this.document=mt(l),this.documentListeners=new At(this.document),this.listeners=new At(r),this.windowListeners=new At(be(l)),this.initialCoordinates=(i=An(a))!=null?i:_e,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(Ne.Resize,this.handleCancel),this.windowListeners.add(Ne.DragStart,fr),this.windowListeners.add(Ne.VisibilityChange,this.handleCancel),this.windowListeners.add(Ne.ContextMenu,fr),this.documentListeners.add(Ne.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hr(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(gr(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ne.Click,Do,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ne.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:a}=this,{onMove:l,options:{activationConstraint:d}}=a;if(!i)return;const u=(n=An(t))!=null?n:_e,g=Ot(i,u);if(!r&&d){if(gr(d)){if(d.tolerance!=null&&wn(g,d.tolerance))return this.handleCancel();if(wn(g,d.distance))return this.handleStart()}return hr(d)&&wn(g,d.tolerance)?this.handleCancel():void 0}t.cancelable&&t.preventDefault(),l(u)}handleEnd(){const{onEnd:t}=this.props;this.detach(),t()}handleCancel(){const{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===L.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Eo={move:{name:"pointermove"},end:{name:"pointerup"}};class Fn extends zn{constructor(t){const{event:n}=t,r=mt(n.target);super(t,Eo,r)}}Fn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const To={move:{name:"mousemove"},end:{name:"mouseup"}};var Tn;(function(e){e[e.RightClick=2]="RightClick"})(Tn||(Tn={}));class Ro extends zn{constructor(t){super(t,To,mt(t.event.target))}}Ro.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Tn.RightClick?!1:(r==null||r({event:n}),!0)}}];const Cn={move:{name:"touchmove"},end:{name:"touchend"}};class Io extends zn{constructor(t){super(t,Cn)}static setup(){return window.addEventListener(Cn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Cn.move.name,t)};function t(){}}}Io.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Et;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Et||(Et={}));var on;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(on||(on={}));function Oo(e){let{acceleration:t,activator:n=Et.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:l=5,order:d=on.TreeOrder,pointerCoordinates:u,scrollableAncestors:g,scrollableAncestorRects:b,delta:h,threshold:x}=e;const m=Lo({delta:h,disabled:!a}),[E,C]=Hi(),j=f.useRef({x:0,y:0}),D=f.useRef({x:0,y:0}),N=f.useMemo(()=>{switch(n){case Et.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Et.DraggableRect:return i}},[n,i,u]),S=f.useRef(null),T=f.useCallback(()=>{const O=S.current;if(!O)return;const A=j.current.x*D.current.x,M=j.current.y*D.current.y;O.scrollBy(A,M)},[]),I=f.useMemo(()=>d===on.TreeOrder?[...g].reverse():g,[d,g]);f.useEffect(()=>{if(!a||!g.length||!N){C();return}for(const O of I){if((r==null?void 0:r(O))===!1)continue;const A=g.indexOf(O),M=b[A];if(!M)continue;const{direction:B,speed:v}=xo(O,M,N,t,x);for(const P of["x","y"])m[P][B[P]]||(v[P]=0,B[P]=0);if(v.x>0||v.y>0){C(),S.current=O,E(T,l),j.current=v,D.current=B;return}}j.current={x:0,y:0},D.current={x:0,y:0},C()},[t,T,r,C,a,l,JSON.stringify(N),JSON.stringify(m),E,g,I,b,JSON.stringify(x)])}const Mo={x:{[Q.Backward]:!1,[Q.Forward]:!1},y:{[Q.Backward]:!1,[Q.Forward]:!1}};function Lo(e){let{delta:t,disabled:n}=e;const r=Dn(t);return Bt(i=>{if(n||!r||!i)return Mo;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Q.Backward]:i.x[Q.Backward]||a.x===-1,[Q.Forward]:i.x[Q.Forward]||a.x===1},y:{[Q.Backward]:i.y[Q.Backward]||a.y===-1,[Q.Forward]:i.y[Q.Forward]||a.y===1}}},[n,t,r])}function _o(e,t){const n=t!==null?e.get(t):void 0,r=n?n.node.current:null;return Bt(i=>{var a;return t===null?null:(a=r??i)!=null?a:null},[r,t])}function ko(e,t){return f.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,a=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...a]},[]),[e,t])}var Lt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Lt||(Lt={}));var Rn;(function(e){e.Optimized="optimized"})(Rn||(Rn={}));const pr=new Map;function Po(e,t){let{dragging:n,dependencies:r,config:i}=t;const[a,l]=f.useState(null),{frequency:d,measure:u,strategy:g}=i,b=f.useRef(e),h=j(),x=It(h),m=f.useCallback(function(D){D===void 0&&(D=[]),!x.current&&l(N=>N===null?D:N.concat(D.filter(S=>!N.includes(S))))},[x]),E=f.useRef(null),C=Bt(D=>{if(h&&!n)return pr;if(!D||D===pr||b.current!==e||a!=null){const N=new Map;for(let S of e){if(!S)continue;if(a&&a.length>0&&!a.includes(S.id)&&S.rect.current){N.set(S.id,S.rect.current);continue}const T=S.node.current,I=T?new Bn(u(T),T):null;S.rect.current=I,I&&N.set(S.id,I)}return N}return D},[e,a,n,h,u]);return f.useEffect(()=>{b.current=e},[e]),f.useEffect(()=>{h||m()},[n,h]),f.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),f.useEffect(()=>{h||typeof d!="number"||E.current!==null||(E.current=setTimeout(()=>{m(),E.current=null},d))},[d,h,m,...r]),{droppableRects:C,measureDroppableContainers:m,measuringScheduled:a!=null};function j(){switch(g){case Lt.Always:return!1;case Lt.BeforeDragging:return n;default:return!n}}}function Gr(e,t){return Bt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Bo(e,t){return Gr(e,t)}function Uo(e){let{callback:t,disabled:n}=e;const r=kn(t),i=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return f.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function un(e){let{callback:t,disabled:n}=e;const r=kn(t),i=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return f.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function zo(e){return new Bn(vt(e),e)}function br(e,t,n){t===void 0&&(t=zo);const[r,i]=f.useReducer(d,null),a=Uo({callback(u){if(e)for(const g of u){const{type:b,target:h}=g;if(b==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),l=un({callback:i});return Le(()=>{i(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),r;function d(u){if(!e)return null;if(e.isConnected===!1){var g;return(g=u??n)!=null?g:null}const b=t(e);return JSON.stringify(u)===JSON.stringify(b)?u:b}}function Fo(e){const t=Gr(e);return Ur(e,t)}const mr=[];function $o(e){const t=f.useRef(e),n=Bt(r=>e?r&&r!==mr&&e&&t.current&&e.parentNode===t.current.parentNode?r:dn(e):mr,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function Ho(e){const[t,n]=f.useState(null),r=f.useRef(e),i=f.useCallback(a=>{const l=yn(a.target);l&&n(d=>d?(d.set(l,En(l)),new Map(d)):null)},[]);return f.useEffect(()=>{const a=r.current;if(e!==a){l(a);const d=e.map(u=>{const g=yn(u);return g?(g.addEventListener("scroll",i,{passive:!0}),[g,En(g)]):null}).filter(u=>u!=null);n(d.length?new Map(d):null),r.current=e}return()=>{l(e),l(a)};function l(d){d.forEach(u=>{const g=yn(u);g==null||g.removeEventListener("scroll",i)})}},[i,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,l)=>pt(a,l),_e):Xr(e):_e,[e,t])}function vr(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const r=e!==_e;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ot(e,n.current):_e}function Ko(e){f.useEffect(()=>{if(!ln)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Xo(e,t){return f.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:a}=r;return n[i]=l=>{a(l,t)},n},{}),[e,t])}function Yr(e){return f.useMemo(()=>e?po(e):null,[e])}const Sn=[];function Wo(e,t){t===void 0&&(t=vt);const[n]=e,r=Yr(n?be(n):null),[i,a]=f.useReducer(d,Sn),l=un({callback:a});return e.length>0&&i===Sn&&a(),Le(()=>{e.length?e.forEach(u=>l==null?void 0:l.observe(u)):(l==null||l.disconnect(),a())},[e]),i;function d(){return e.length?e.map(u=>Hr(u)?r:new Bn(t(u),u)):Sn}}function Go(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Pt(t)?t:e}function Yo(e){let{measure:t}=e;const[n,r]=f.useState(null),i=f.useCallback(g=>{for(const{target:b}of g)if(Pt(b)){r(h=>{const x=t(b);return h?{...h,width:x.width,height:x.height}:x});break}},[t]),a=un({callback:i}),l=f.useCallback(g=>{const b=Go(g);a==null||a.disconnect(),b&&(a==null||a.observe(b)),r(b?t(b):null)},[t,a]),[d,u]=rn(l);return f.useMemo(()=>({nodeRef:d,rect:n,setRef:u}),[n,d,u])}const qo=[{sensor:Fn,options:{}},{sensor:Un,options:{}}],Vo={current:{}},en={draggable:{measure:ur},droppable:{measure:ur,strategy:Lt.WhileDragging,frequency:Rn.Optimized},dragOverlay:{measure:vt}};class Tt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Jo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Tt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:sn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:en,measureDroppableContainers:sn,windowRect:null,measuringScheduled:!1},Qo={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:sn,draggableNodes:new Map,over:null,measureDroppableContainers:sn},fn=f.createContext(Qo),qr=f.createContext(Jo);function Zo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Tt}}}function ea(e,t){switch(t.type){case q.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case q.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case q.DragEnd:case q.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case q.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Tt(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case q.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const l=new Tt(e.droppable.containers);return l.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case q.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new Tt(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function ta(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=f.useContext(fn),a=Dn(r),l=Dn(n==null?void 0:n.id);return f.useEffect(()=>{if(!t&&!r&&a&&l!=null){if(!Pn(a)||document.activeElement===a.target)return;const d=i.get(l);if(!d)return;const{activatorNode:u,node:g}=d;if(!u.current&&!g.current)return;requestAnimationFrame(()=>{for(const b of[u.current,g.current]){if(!b)continue;const h=Wi(b);if(h){h.focus();break}}})}},[r,t,i,l,a]),null}function na(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...r}),n):n}function ra(e){return f.useMemo(()=>({draggable:{...en.draggable,...e==null?void 0:e.draggable},droppable:{...en.droppable,...e==null?void 0:e.droppable},dragOverlay:{...en.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function sa(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const a=f.useRef(!1),{x:l,y:d}=typeof i=="boolean"?{x:i,y:i}:i;Le(()=>{if(!l&&!d||!t){a.current=!1;return}if(a.current||!r)return;const g=t==null?void 0:t.node.current;if(!g||g.isConnected===!1)return;const b=n(g),h=Ur(b,r);if(l||(h.x=0),d||(h.y=0),a.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const x=zr(g);x&&x.scrollBy({top:h.y,left:h.x})}},[t,l,d,r,n])}const Vr=f.createContext({..._e,scaleX:1,scaleY:1});var et;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(et||(et={}));const ia=f.memo(function(t){var n,r,i,a;let{id:l,accessibility:d,autoScroll:u=!0,children:g,sensors:b=qo,collisionDetection:h=ao,measuring:x,modifiers:m,...E}=t;const C=f.useReducer(ea,void 0,Zo),[j,D]=C,[N,S]=Qi(),[T,I]=f.useState(et.Uninitialized),O=T===et.Initialized,{draggable:{active:A,nodes:M,translate:B},droppable:{containers:v}}=j,P=A?M.get(A):null,K=f.useRef({initial:null,translated:null}),Z=f.useMemo(()=>{var Y;return A!=null?{id:A,data:(Y=P==null?void 0:P.data)!=null?Y:Vo,rect:K}:null},[A,P]),y=f.useRef(null),[F,U]=f.useState(null),[G,ke]=f.useState(null),X=It(E,Object.values(E)),$e=Ut("DndDescribedBy",l),qe=f.useMemo(()=>v.getEnabled(),[v]),V=ra(x),{droppableRects:de,measureDroppableContainers:Ae,measuringScheduled:_}=Po(qe,{dragging:O,dependencies:[B.x,B.y],config:V.droppable}),ee=_o(M,A),He=f.useMemo(()=>G?An(G):null,[G]),W=Kt(),ue=Bo(ee,V.draggable.measure);sa({activeNode:A?M.get(A):null,config:W.layoutShiftCompensation,initialRect:ue,measure:V.draggable.measure});const k=br(ee,V.draggable.measure,ue),Ee=br(ee?ee.parentElement:null),se=f.useRef({activatorEvent:null,active:null,activeNode:ee,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:v,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=v.getNodeFor((n=se.current.over)==null?void 0:n.id),fe=Yo({measure:V.dragOverlay.measure}),Re=(r=fe.nodeRef.current)!=null?r:ee,Pe=O?(i=fe.rect)!=null?i:k:null,xt=!!(fe.nodeRef.current&&fe.rect),at=Fo(xt?null:k),yt=Yr(Re?be(Re):null),Be=$o(O?Te??ee:null),ct=Wo(Be),lt=na(m,{transform:{x:B.x-at.x,y:B.y-at.y,scaleX:1,scaleY:1},activatorEvent:G,active:Z,activeNodeRect:k,containerNodeRect:Ee,draggingNodeRect:Pe,over:se.current.over,overlayNodeRect:fe.rect,scrollableAncestors:Be,scrollableAncestorRects:ct,windowRect:yt}),zt=He?pt(He,B):null,Ft=Ho(Be),gn=vr(Ft),hn=vr(Ft,[k]),Ie=pt(lt,gn),Ue=Pe?uo(Pe,lt):null,Ve=Z&&Ue?h({active:Z,collisionRect:Ue,droppableRects:de,droppableContainers:qe,pointerCoordinates:zt}):null,me=Br(Ve,"id"),[Oe,wt]=f.useState(null),pn=xt?lt:pt(lt,hn),$t=co(pn,(a=Oe==null?void 0:Oe.rect)!=null?a:null,k),tt=f.useCallback((Y,ae)=>{let{sensor:te,options:ge}=ae;if(y.current==null)return;const ie=M.get(y.current);if(!ie)return;const ce=Y.nativeEvent,he=new te({active:y.current,activeNode:ie,event:ce,options:ge,context:se,onStart(ve){const nt=y.current;if(nt==null)return;const rt=M.get(nt);if(!rt)return;const{onDragStart:dt}=X.current,ut={active:{id:nt,data:rt.data,rect:K}};ht.unstable_batchedUpdates(()=>{dt==null||dt(ut),I(et.Initializing),D({type:q.DragStart,initialCoordinates:ve,active:nt}),N({type:"onDragStart",event:ut})})},onMove(ve){D({type:q.DragMove,coordinates:ve})},onEnd:Ce(q.DragEnd),onCancel:Ce(q.DragCancel)});ht.unstable_batchedUpdates(()=>{U(he),ke(Y.nativeEvent)});function Ce(ve){return async function(){const{active:rt,collisions:dt,over:ut,scrollAdjustedTranslate:St}=se.current;let Xe=null;if(rt&&St){const{cancelDrop:xe}=X.current;Xe={activatorEvent:ce,active:rt,collisions:dt,delta:St,over:ut},ve===q.DragEnd&&typeof xe=="function"&&await Promise.resolve(xe(Xe))&&(ve=q.DragCancel)}y.current=null,ht.unstable_batchedUpdates(()=>{D({type:ve}),I(et.Uninitialized),wt(null),U(null),ke(null);const xe=ve===q.DragEnd?"onDragEnd":"onDragCancel";if(Xe){const jt=X.current[xe];jt==null||jt(Xe),N({type:xe,event:Xe})}})}}},[M]),Ht=f.useCallback((Y,ae)=>(te,ge)=>{const ie=te.nativeEvent,ce=M.get(ge);if(y.current!==null||!ce||ie.dndKit||ie.defaultPrevented)return;const he={active:ce};Y(te,ae.options,he)===!0&&(ie.dndKit={capturedBy:ae.sensor},y.current=ge,tt(te,ae))},[M,tt]),Ct=ko(b,Ht);Ko(b),Le(()=>{k&&T===et.Initializing&&I(et.Initialized)},[k,T]),f.useEffect(()=>{const{onDragMove:Y}=X.current,{active:ae,activatorEvent:te,collisions:ge,over:ie}=se.current;if(!ae||!te)return;const ce={active:ae,activatorEvent:te,collisions:ge,delta:{x:Ie.x,y:Ie.y},over:ie};ht.unstable_batchedUpdates(()=>{Y==null||Y(ce),N({type:"onDragMove",event:ce})})},[Ie.x,Ie.y]),f.useEffect(()=>{const{active:Y,activatorEvent:ae,collisions:te,droppableContainers:ge,scrollAdjustedTranslate:ie}=se.current;if(!Y||y.current==null||!ae||!ie)return;const{onDragOver:ce}=X.current,he=ge.get(me),Ce=he&&he.rect.current?{id:he.id,rect:he.rect.current,data:he.data,disabled:he.disabled}:null,ve={active:Y,activatorEvent:ae,collisions:te,delta:{x:ie.x,y:ie.y},over:Ce};ht.unstable_batchedUpdates(()=>{wt(Ce),ce==null||ce(ve),N({type:"onDragOver",event:ve})})},[me]),Le(()=>{se.current={activatorEvent:G,active:Z,activeNode:ee,collisionRect:Ue,collisions:Ve,droppableRects:de,draggableNodes:M,draggingNode:Re,draggingNodeRect:Pe,droppableContainers:v,over:Oe,scrollableAncestors:Be,scrollAdjustedTranslate:Ie},K.current={initial:Pe,translated:Ue}},[Z,ee,Ve,Ue,M,Re,Pe,de,v,Oe,Be,Ie]),Oo({...W,delta:B,draggingRect:Ue,pointerCoordinates:zt,scrollableAncestors:Be,scrollableAncestorRects:ct});const bn=f.useMemo(()=>({active:Z,activeNode:ee,activeNodeRect:k,activatorEvent:G,collisions:Ve,containerNodeRect:Ee,dragOverlay:fe,draggableNodes:M,droppableContainers:v,droppableRects:de,over:Oe,measureDroppableContainers:Ae,scrollableAncestors:Be,scrollableAncestorRects:ct,measuringConfiguration:V,measuringScheduled:_,windowRect:yt}),[Z,ee,k,G,Ve,Ee,fe,M,v,de,Oe,Ae,Be,ct,V,_,yt]),Ke=f.useMemo(()=>({activatorEvent:G,activators:Ct,active:Z,activeNodeRect:k,ariaDescribedById:{draggable:$e},dispatch:D,draggableNodes:M,over:Oe,measureDroppableContainers:Ae}),[G,Ct,Z,k,D,$e,M,Oe,Ae]);return pe.createElement(_r.Provider,{value:S},pe.createElement(fn.Provider,{value:Ke},pe.createElement(qr.Provider,{value:bn},pe.createElement(Vr.Provider,{value:$t},g)),pe.createElement(ta,{disabled:(d==null?void 0:d.restoreFocus)===!1})),pe.createElement(to,{...d,hiddenTextDescribedById:$e}));function Kt(){const Y=(F==null?void 0:F.autoScrollEnabled)===!1,ae=typeof u=="object"?u.enabled===!1:u===!1,te=O&&!Y&&!ae;return typeof u=="object"?{...u,enabled:te}:{enabled:te}}}),oa=f.createContext(null),xr="button",aa="Droppable";function ca(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const a=Ut(aa),{activators:l,activatorEvent:d,active:u,activeNodeRect:g,ariaDescribedById:b,draggableNodes:h,over:x}=f.useContext(fn),{role:m=xr,roleDescription:E="draggable",tabIndex:C=0}=i??{},j=(u==null?void 0:u.id)===t,D=f.useContext(j?Vr:oa),[N,S]=rn(),[T,I]=rn(),O=Xo(l,t),A=It(n);Le(()=>(h.set(t,{id:t,key:a,node:N,activatorNode:T,data:A}),()=>{const B=h.get(t);B&&B.key===a&&h.delete(t)}),[h,t]);const M=f.useMemo(()=>({role:m,tabIndex:C,"aria-disabled":r,"aria-pressed":j&&m===xr?!0:void 0,"aria-roledescription":E,"aria-describedby":b.draggable}),[r,m,C,j,E,b.draggable]);return{active:u,activatorEvent:d,activeNodeRect:g,attributes:M,isDragging:j,listeners:r?void 0:O,node:N,over:x,setNodeRef:S,setActivatorNodeRef:I,transform:D}}function la(){return f.useContext(qr)}const da="Droppable",ua={timeout:25};function fa(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const a=Ut(da),{active:l,dispatch:d,over:u,measureDroppableContainers:g}=f.useContext(fn),b=f.useRef({disabled:n}),h=f.useRef(!1),x=f.useRef(null),m=f.useRef(null),{disabled:E,updateMeasurementsFor:C,timeout:j}={...ua,...i},D=It(C??r),N=f.useCallback(()=>{if(!h.current){h.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{g(Array.isArray(D.current)?D.current:[D.current]),m.current=null},j)},[j]),S=un({callback:N,disabled:E||!l}),T=f.useCallback((M,B)=>{S&&(B&&(S.unobserve(B),h.current=!1),M&&S.observe(M))},[S]),[I,O]=rn(T),A=It(t);return f.useEffect(()=>{!S||!I.current||(S.disconnect(),h.current=!1,S.observe(I.current))},[I,S]),Le(()=>(d({type:q.RegisterDroppable,element:{id:r,key:a,disabled:n,node:I,rect:x,data:A}}),()=>d({type:q.UnregisterDroppable,key:a,id:r})),[r]),f.useEffect(()=>{n!==b.current.disabled&&(d({type:q.SetDroppableDisabled,id:r,key:a,disabled:n}),b.current.disabled=n)},[r,a,n,d]),{active:l,rect:x,isOver:(u==null?void 0:u.id)===r,node:I,over:u,setNodeRef:O}}function $n(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ga(e,t){return e.reduce((n,r,i)=>{const a=t.get(r);return a&&(n[i]=a),n},Array(e.length))}function Qt(e){return e!==null&&e>=0}function ha(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function pa(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Jr=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const a=$n(t,r,n),l=t[i],d=a[i];return!d||!l?null:{x:d.left-l.left,y:d.top-l.top,scaleX:d.width/l.width,scaleY:d.height/l.height}},Zt={scaleX:1,scaleY:1},ba=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:a,overIndex:l}=e;const d=(t=a[n])!=null?t:r;if(!d)return null;if(i===n){const g=a[l];return g?{x:0,y:n<l?g.top+g.height-(d.top+d.height):g.top-d.top,...Zt}:null}const u=ma(a,i,n);return i>n&&i<=l?{x:0,y:-d.height-u,...Zt}:i<n&&i>=l?{x:0,y:d.height+u,...Zt}:{x:0,y:0,...Zt}};function ma(e,t,n){const r=e[t],i=e[t-1],a=e[t+1];return r?n<t?i?r.top-(i.top+i.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const Qr="Sortable",Zr=pe.createContext({activeIndex:-1,containerId:Qr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Jr,disabled:{draggable:!1,droppable:!1}});function va(e){let{children:t,id:n,items:r,strategy:i=Jr,disabled:a=!1}=e;const{active:l,dragOverlay:d,droppableRects:u,over:g,measureDroppableContainers:b}=la(),h=Ut(Qr,n),x=d.rect!==null,m=f.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),E=l!=null,C=l?m.indexOf(l.id):-1,j=g?m.indexOf(g.id):-1,D=f.useRef(m),N=!ha(m,D.current),S=j!==-1&&C===-1||N,T=pa(a);Le(()=>{N&&E&&b(m)},[N,m,E,b]),f.useEffect(()=>{D.current=m},[m]);const I=f.useMemo(()=>({activeIndex:C,containerId:h,disabled:T,disableTransforms:S,items:m,overIndex:j,useDragOverlay:x,sortedRects:ga(m,u),strategy:i}),[C,h,T.draggable,T.droppable,S,m,j,u,x,i]);return pe.createElement(Zr.Provider,{value:I},t)}const xa=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return $n(n,r,i).indexOf(t)},ya=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:a,newIndex:l,previousItems:d,previousContainerId:u,transition:g}=e;return!g||!r||d!==a&&i===l?!1:n?!0:l!==i&&t===u},wa={duration:200,easing:"ease"},es="transform",Ca=Mt.Transition.toString({property:es,duration:0,easing:"linear"}),Sa={roleDescription:"sortable"};function ja(e){let{disabled:t,index:n,node:r,rect:i}=e;const[a,l]=f.useState(null),d=f.useRef(n);return Le(()=>{if(!t&&n!==d.current&&r.current){const u=i.current;if(u){const g=vt(r.current,{ignoreTransform:!0}),b={x:u.left-g.left,y:u.top-g.top,scaleX:u.width/g.width,scaleY:u.height/g.height};(b.x||b.y)&&l(b)}}n!==d.current&&(d.current=n)},[t,n,r,i]),f.useEffect(()=>{a&&l(null)},[a]),a}function Na(e){let{animateLayoutChanges:t=ya,attributes:n,disabled:r,data:i,getNewIndex:a=xa,id:l,strategy:d,resizeObserverConfig:u,transition:g=wa}=e;const{items:b,containerId:h,activeIndex:x,disabled:m,disableTransforms:E,sortedRects:C,overIndex:j,useDragOverlay:D,strategy:N}=f.useContext(Zr),S=Da(r,m),T=b.indexOf(l),I=f.useMemo(()=>({sortable:{containerId:h,index:T,items:b},...i}),[h,i,T,b]),O=f.useMemo(()=>b.slice(b.indexOf(l)),[b,l]),{rect:A,node:M,isOver:B,setNodeRef:v}=fa({id:l,data:I,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...u}}),{active:P,activatorEvent:K,activeNodeRect:Z,attributes:y,setNodeRef:F,listeners:U,isDragging:G,over:ke,setActivatorNodeRef:X,transform:$e}=ca({id:l,data:I,attributes:{...Sa,...n},disabled:S.draggable}),qe=$i(v,F),V=!!P,de=V&&!E&&Qt(x)&&Qt(j),Ae=!D&&G,_=Ae&&de?$e:null,He=de?_??(d??N)({rects:C,activeNodeRect:Z,activeIndex:x,overIndex:j,index:T}):null,W=Qt(x)&&Qt(j)?a({id:l,items:b,activeIndex:x,overIndex:j}):T,ue=P==null?void 0:P.id,k=f.useRef({activeId:ue,items:b,newIndex:W,containerId:h}),Ee=b!==k.current.items,se=t({active:P,containerId:h,isDragging:G,isSorting:V,id:l,index:T,items:b,newIndex:k.current.newIndex,previousItems:k.current.items,previousContainerId:k.current.containerId,transition:g,wasDragging:k.current.activeId!=null}),Te=ja({disabled:!se,index:T,node:M,rect:A});return f.useEffect(()=>{V&&k.current.newIndex!==W&&(k.current.newIndex=W),h!==k.current.containerId&&(k.current.containerId=h),b!==k.current.items&&(k.current.items=b)},[V,W,h,b]),f.useEffect(()=>{if(ue===k.current.activeId)return;if(ue&&!k.current.activeId){k.current.activeId=ue;return}const Re=setTimeout(()=>{k.current.activeId=ue},50);return()=>clearTimeout(Re)},[ue]),{active:P,activeIndex:x,attributes:y,data:I,rect:A,index:T,newIndex:W,items:b,isOver:B,isSorting:V,isDragging:G,listeners:U,node:M,overIndex:j,over:ke,setNodeRef:qe,setActivatorNodeRef:X,setDroppableNodeRef:v,setDraggableNodeRef:F,transform:Te??He,transition:fe()};function fe(){if(Te||Ee&&k.current.newIndex===T)return Ca;if(!(Ae&&!Pn(K)||!g)&&(V||se))return Mt.Transition.toString({...g,property:es})}}function Da(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function an(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Aa=[L.Down,L.Right,L.Up,L.Left],Ea=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:a,over:l,scrollableAncestors:d}}=t;if(Aa.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];a.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const x=i.get(h.id);if(x)switch(e.code){case L.Down:r.top<x.top&&u.push(h);break;case L.Up:r.top>x.top&&u.push(h);break;case L.Left:r.left>x.left&&u.push(h);break;case L.Right:r.left<x.left&&u.push(h);break}});const g=io({active:n,collisionRect:r,droppableRects:i,droppableContainers:u,pointerCoordinates:null});let b=Br(g,"id");if(b===(l==null?void 0:l.id)&&g.length>1&&(b=g[1].id),b!=null){const h=a.get(n.id),x=a.get(b),m=x?i.get(x.id):null,E=x==null?void 0:x.node.current;if(E&&m&&h&&x){const j=dn(E).some((O,A)=>d[A]!==O),D=ts(h,x),N=Ta(h,x),S=j||!D?{x:0,y:0}:{x:N?r.width-m.width:0,y:N?r.height-m.height:0},T={x:m.left,y:m.top};return S.x&&S.y?T:Ot(T,S)}}}};function ts(e,t){return!an(e)||!an(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Ta(e,t){return!an(e)||!an(t)||!ts(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function Ra(e){const{attributes:t,listeners:n,setNodeRef:r,transform:i,transition:a}=Na({id:e.item.id}),l={transform:Mt.Transform.toString(i),transition:a};return o.jsxs("div",{ref:r,style:l,...t,...n,className:De("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg touch-none",e.item.disabled&&"opacity-50",i?"cursor-grabbing":"cursor-grab"),children:[o.jsx("span",{className:"flex-1 text-white font-bold",children:e.item.name}),e.item.disabled&&o.jsx(Ye,{icon:le.WARNING}),o.jsx(Ye,{icon:le.MENU})]})}function Ia(e){const t=no(cr(Fn),cr(Un,{coordinateGetter:Ea})),n=r=>{const{active:i,over:a}=r;if(a&&i.id!==a.id){const l=e.items,d=l.findIndex(b=>b.id===i.id),u=l.findIndex(b=>b.id===a.id),g=$n(l,d,u);e.setItems(g)}};return o.jsx(ia,{sensors:t,collisionDetection:so,onDragEnd:n,children:o.jsx(va,{items:e.items,strategy:ba,children:o.jsx("div",{className:"flex flex-col gap-2",children:e.items.map(r=>o.jsx(Ra,{item:r},r.id))})})})}function Oa(e){const{t}=re(),n=mi(tr.map(u=>u.code)),r=si(),i=tr.sort((u,g)=>n.indexOf(u.code)-n.indexOf(g.code)).map(u=>({id:u.code,name:`${u.name}${u.nativeName?` — ${u.nativeName}`:""}`,leftIcon:o.jsx(vi,{langCode:u.code})})),a=i.find(u=>{var g;return u.id===((g=xi(e.language))==null?void 0:g.code)}),l=Ir().listSources(),d=f.useMemo(()=>{const u=ii().listSources();return e.sourceOrder.map(g=>{var b;return{id:g,name:((b=l.find(h=>h.id===g))==null?void 0:b.name)||g,disabled:!u.find(h=>h.id===g)}})},[e.sourceOrder,l]);return o.jsxs("div",{className:"space-y-12",children:[o.jsx(kt,{border:!0,children:t("settings.preferences.title")}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-bold mb-3",children:t("settings.preferences.language")}),o.jsx("p",{className:"max-w-[20rem] font-medium",children:t("settings.preferences.languageDescription")}),o.jsx(oi,{options:i,selectedItem:a||i[0],setSelectedItem:u=>e.setLanguage(u.id)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-bold mb-3",children:t("settings.preferences.ads")}),o.jsx("p",{className:"max-w-[25rem] font-medium",children:t("settings.preferences.adsDescription")})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-bold mb-3",children:t("settings.preferences.thumbnail")}),o.jsx("p",{className:"max-w-[25rem] font-medium",children:t("settings.preferences.thumbnailDescription")}),o.jsxs("div",{onClick:()=>e.setEnableThumbnails(!e.enableThumbnails),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[o.jsx(Rt,{enabled:e.enableThumbnails}),o.jsx("p",{className:"flex-1 text-white font-bold",children:t("settings.preferences.thumbnailLabel")})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-bold mb-3",children:t("settings.preferences.autoplay")}),o.jsx("p",{className:"max-w-[25rem] font-medium",children:t("settings.preferences.autoplayDescription")}),o.jsxs("div",{onClick:()=>r?e.setEnableAutoplay(!e.enableAutoplay):null,className:De("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",r?"cursor-pointer opacity-100 pointer-events-auto":"cursor-not-allowed opacity-50 pointer-events-none"),children:[o.jsx(Rt,{enabled:e.enableAutoplay&&r}),o.jsx("p",{className:"flex-1 text-white font-bold",children:t("settings.preferences.autoplayLabel")})]})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("p",{className:"text-white font-bold",children:t("settings.preferences.sourceOrder")}),o.jsx("p",{className:"max-w-[25rem] font-medium",children:t("settings.preferences.sourceOrderDescription")}),o.jsx(Ia,{items:d,setItems:u=>e.setSourceOrder(u.map(g=>g.id))}),o.jsx(Fe,{className:"max-w-[25rem]",theme:"secondary",onClick:()=>e.setSourceOrder(l.map(u=>u.id)),children:t("settings.reset")})]})]})}function Ma(e){const{isMobile:t}=Rr();return o.jsx(hi,{ultraWide:!0,classNames:"overflow-visible",children:o.jsxs("div",{className:De("grid gap-12",t?"grid-cols-1":"lg:grid-cols-[280px,1fr]"),children:[o.jsx(Pi,{}),o.jsx("div",{children:e.children})]})})}function La(e){const t=_t(),{account:n}=e,[r,i]=Mn(()=>t?ai(t,n):Promise.resolve([]),[n,t]);return f.useEffect(()=>{i()},[i]),o.jsxs(o.Fragment,{children:[o.jsx(Ni,{deviceName:e.deviceName,setDeviceName:e.setDeviceName,colorA:e.colorA,setColorA:e.setColorA,colorB:e.colorB,setColorB:e.setColorB,userIcon:e.userIcon,setUserIcon:e.setUserIcon}),o.jsx(Oi,{error:!!r.error,loading:r.loading,sessions:r.value??[],onChange:i}),o.jsx(Si,{})]})}function Ka(){const{t:e}=re(),t=nr(y=>y.theme),n=nr(y=>y.setTheme),r=jn(y=>y.previewTheme),i=jn(y=>y.setPreviewTheme),a=rr(y=>y.language),l=rr(y=>y.setLanguage),d=sr(y=>y.styling),u=sr(y=>y.updateStyling),g=we(y=>y.proxySet),b=we(y=>y.setProxySet),h=we(y=>y.backendUrl),x=we(y=>y.setBackendUrl),m=gt(y=>y.enableThumbnails),E=gt(y=>y.setEnableThumbnails),C=gt(y=>y.enableAutoplay),j=gt(y=>y.setEnableAutoplay),D=gt(y=>y.sourceOrder),N=gt(y=>y.setSourceOrder),S=we(y=>y.account),T=we(y=>y.setAccountProfile),I=we(y=>y.updateDeviceName),O=f.useMemo(()=>S?Tr(S.deviceName,Nn(S.seed)):"",[S]),A=_t(),{logout:M}=Dr(),B=we(),v=Ci(t,a,d,O,g,h,S==null?void 0:S.profile,m,C,D),P=f.useMemo(()=>{const y=Ir().listSources(),F=y.map(X=>X.id),U=v.sourceOrder.state,G=U.filter(X=>F.includes(X)),ke=y.filter(X=>!U.includes(X.id)).map(X=>X.id);return[...G,...ke]},[v.sourceOrder.state]);f.useEffect(()=>{i(t??"default")},[i,t]),f.useEffect(()=>()=>{i(null)},[i]);const K=f.useCallback(y=>{v.theme.set(y==="default"?null:y),i(y)},[v.theme,i]),Z=f.useCallback(async()=>{var y,F;if(S&&A){if((v.appLanguage.changed||v.theme.changed||v.proxyUrls.changed)&&await ci(A,S,{applicationLanguage:v.appLanguage.state,applicationTheme:v.theme.state,proxyUrls:((y=v.proxyUrls.state)==null?void 0:y.filter(U=>U!==""))??null}),v.deviceName.changed){const U=await li(v.deviceName.state,Nn(S.seed));await di(A,S,{deviceName:U}),I(U)}v.profile.changed&&await ui(A,S,{profile:v.profile.state})}if(E(v.enableThumbnails.state),j(v.enableAutoplay.state),N(v.sourceOrder.state),l(v.appLanguage.state),n(v.theme.state),u(v.subtitleStyling.state),b(((F=v.proxyUrls.state)==null?void 0:F.filter(U=>U!==""))??null),v.profile.state&&T(v.profile.state),v.backendUrl.changed){await M();let U=v.backendUrl.state;U&&!U.startsWith("http://")&&!U.startsWith("https://")&&(U=`https://${U}`),x(U)}},[S,A,E,v,j,N,l,n,u,b,I,T,M,x]);return o.jsxs(fi,{children:[o.jsx(gi,{subpage:!0,k:"global.pages.settings"}),o.jsxs(Ma,{children:[o.jsxs("div",{id:"settings-account",children:[o.jsx(kt,{border:!0,className:"!mb-0",children:e("settings.account.title")}),B.account&&v.profile.state?o.jsx(La,{account:B.account,deviceName:v.deviceName.state,setDeviceName:v.deviceName.set,colorA:v.profile.state.colorA,setColorA:y=>{v.profile.set(F=>F?{...F,colorA:y}:void 0)},colorB:v.profile.state.colorB,setColorB:y=>v.profile.set(F=>F?{...F,colorB:y}:void 0),userIcon:v.profile.state.icon,setUserIcon:y=>v.profile.set(F=>F?{...F,icon:y}:void 0)}):o.jsx(Mi,{})]}),o.jsx("div",{id:"settings-preferences",className:"mt-48",children:o.jsx(Oa,{language:v.appLanguage.state,setLanguage:v.appLanguage.set,enableThumbnails:v.enableThumbnails.state,setEnableThumbnails:v.enableThumbnails.set,enableAutoplay:v.enableAutoplay.state,setEnableAutoplay:v.enableAutoplay.set,sourceOrder:P,setSourceOrder:v.sourceOrder.set})}),o.jsx("div",{id:"settings-appearance",className:"mt-48",children:o.jsx(Fi,{active:r??"default",inUse:t??"default",setTheme:K})}),o.jsx("div",{id:"settings-captions",className:"mt-48",children:o.jsx(Di,{styling:v.subtitleStyling.state,setStyling:v.subtitleStyling.set})}),o.jsx("div",{id:"settings-connection",className:"mt-48",children:o.jsx(Ti,{backendUrl:v.backendUrl.state,setBackendUrl:v.backendUrl.set,proxyUrls:v.proxyUrls.state,setProxyUrls:v.proxyUrls.set})})]}),o.jsxs(Ar,{animation:"fade",show:v.changed,className:"bg-settings-saveBar-background border-t border-settings-card-border/50 py-4 transition-opacity w-full fixed bottom-0 flex justify-between flex-col md:flex-row px-8 items-start md:items-center gap-3",children:[o.jsx("p",{className:"text-type-danger",children:e("settings.unsaved")}),o.jsxs("div",{className:"space-x-3 w-full md:w-auto flex",children:[o.jsx(Fe,{className:"w-full md:w-auto",theme:"secondary",onClick:v.reset,children:e("settings.reset")}),o.jsx(Fe,{className:"w-full md:w-auto",theme:"purple",onClick:Z,children:e("settings.save")})]})]})]})}export{La as AccountSettings,Ka as SettingsPage,Ka as default};
//# sourceMappingURL=Settings-k8Dx4MJq.js.map
